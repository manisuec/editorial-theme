{{ define "main" }}
<section class="hero">
    <div class="container">
        <div class="hero-content">
            <h1>
                {{ with .Site.Params.heroTitle }}{{ . }}{{ else }}Deep<br>Tech<br>Wisdom{{ end }}
            </h1>
            <p class="subtitle">{{ .Site.Params.heroSubtitle }}</p>
            
            <div class="hero-meta">
                {{ range .Site.Params.stats }}
                <div class="meta-item">
                    <span class="meta-label">{{ .label }}</span>
                    <span class="meta-value">{{ .value }}</span>
                </div>
                {{ end }}
                <a href="{{ "post" | relURL }}" class="hero-cta">Start Reading</a>
            </div>

            <div class="hero-actions-wrapper">
                <p class="newsletter-label">{{ .Site.Params.newsletterLabel | default "Stay in the loop for insights on backend development" }}</p>
                {{ partial "newsletter-form.html" (dict "id" "hero-newsletter" "context" .) }}
            </div>
        </div>

        <div class="hero-image">
            <img src="/img/hero-image.svg" alt="Tech Insights - Deep Tech Wisdom for backend developers" class="hero-img" />
        </div>
    </div>
</section>

<section class="featured">
    <div class="container">
        <div class="section-label">Latest Insights</div>
        
        <div class="featured-grid">
            <div class="featured-sidebar">
                <h2>{{ with index (.Site.RegularPages.ByDate.Reverse) 0 }}{{ .Site.Params.featuredTitle | default "Node.js Security Done Right" }}{{ end }}</h2>
                <p>
                    {{ with index (.Site.RegularPages.ByDate.Reverse) 0 }}{{ .Site.Params.featuredDescription | default "Production lessons from someone who's learned the hard way. Real vulnerabilities, real solutions." }}{{ end }}
                </p>
            </div>

            <div class="featured-content">
                {{ range first 3 (.Site.RegularPages.ByDate.Reverse) }}
                {{ partial "article-card.html" (dict "page" . "showShare" true "showExcerpt" true) }}
                {{ end }}
            </div>
        </div>
    </div>
</section>

<section class="topics">
    <div class="container">
        <h2>Explore Topics</h2>
        
        <div class="topics-grid">
            {{ $categoryItems := .Params.categories.items }}
            {{ $taxonomy := .Site.Taxonomies.categories }}
            {{ range $categoryItems }}
                {{ $title := .title }}
                {{ $url := .url }}
                {{ $thumbnail := .thumbnail }}
                {{ $description := .description }}
                {{ if (index $taxonomy $url) }}
                    {{ $page := (index $taxonomy $url).Page }}
                    <a href="{{ $page.Permalink }}" class="topic-card">
                        <img src="{{ $thumbnail }}" alt="{{ $page.Title }}" class="topic-thumbnail" loading="lazy">
                        <div class="topic-name">{{ $page.Title }}</div>
                    </a>
                {{ else }}
                    <a href="{{ "/categories/" | relURL }}{{ $url }}" class="topic-card">
                        <img src="{{ $thumbnail }}" alt="{{ $title }}" class="topic-thumbnail" loading="lazy">
                        <div class="topic-name">{{ $title }}</div>
                    </a>
                {{ end }}
            {{ end }}
        </div>
    </div>
</section>
{{ end }}
